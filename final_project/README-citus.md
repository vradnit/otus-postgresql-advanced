
```
   52  echo "deb [arch=amd64] http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/postgresql.list
   53  wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
   54  curl https://install.citusdata.com/community/deb.sh > add-citus-repo.sh
   55  . ./add-citus-repo.sh
   56  apt-get update
   57  apt-get install postgresql-16 postgresql-16-citus-13.0 postgresql-16-postgis-3 patroni python3-etcd
```
```
   systemctl stop postgresql.service ; systemctl disable postgresql.service
   mkdir -p /data/pg/ ; chown postgres:postgres /data/pg ; chmod go-rx /data/pg

   systemctl enable  patroni ; systemctl start patroni
```

```
# https://www.pgconfig.org
# Generated by PGConfig 3.1.4 (1fe6d98dedcaad1d0a114617cfd08b4fed1d8a01)
# https://api.pgconfig.org/v1/tuning/get-config?format=conf&&log_format=csvlog&max_connections=100&pg_version=16&environment_name=DW&total_ram=16GB&cpus=8&drive_type=SSD&arch=x86-64&os_type=linux

# Memory Configuration
shared_buffers = 4GB
effective_cache_size = 12GB
work_mem = 82MB
maintenance_work_mem = 819MB

# Checkpoint Related Configuration
min_wal_size = 2GB
max_wal_size = 3GB
checkpoint_completion_target = 0.9
wal_buffers = -1

# Network Related Configuration
listen_addresses = '*'
max_connections = 100

# Storage Configuration
random_page_cost = 1.1
effective_io_concurrency = 200

# Worker Processes Configuration
max_worker_processes = 8
max_parallel_workers_per_gather = 2
max_parallel_workers = 2
```

```
root@c-master1:~# patronictl --config-file=/etc/patroni/config.yml list
+ Citus cluster: patroni -------+----------------+-----------+----+-----------+
| Group | Member    | Host      | Role           | State     | TL | Lag in MB |
+-------+-----------+-----------+----------------+-----------+----+-----------+
|     0 | c-master1 | c-master1 | Leader         | running   |  1 |           |
|     0 | c-master2 | c-master2 | Quorum Standby | streaming |  1 |         0 |
|     0 | c-master3 | c-master3 | Quorum Standby | streaming |  1 |         0 |
+-------+-----------+-----------+----------------+-----------+----+-----------+
```

```
root@c-master1:~# etcdctl member list
5184d67c0e2764e1: name=c-master2 peerURLs=http://c-master2:2380 clientURLs=http://c-master2:2379 isLeader=false
b4d321b6dd227fc9: name=c-master3 peerURLs=http://c-master3:2380 clientURLs=http://c-master3:2379 isLeader=true
bc691ad35811d924: name=c-master1 peerURLs=http://c-master1:2380 clientURLs=http://c-master1:2379 isLeader=false
 
root@c-master1:~# etcdctl cluster-health
member 5184d67c0e2764e1 is healthy: got healthy result from http://c-master2:2379
member b4d321b6dd227fc9 is healthy: got healthy result from http://c-master3:2379
member bc691ad35811d924 is healthy: got healthy result from http://c-master1:2379
cluster is healthy
```

```
scope: patroni
name: c-worker1-1
restapi:
  listen: 0.0.0.0:8008
  connect_address: c-worker1-1:8008
etcd:
  hosts: c-master1:2379,c-master2:2379,c-master3:2379
citus:
  group: 1
  database: otus
bootstrap:
  dcs:
    ttl: 30
    loop_wait: 10
    retry_timeout: 10
    maximum_lag_on_failover: 1048576
    postgresql:
      use_pg_rewind: true
      parameters:
        checkpoint_completion_target: 0.9
        effective_cache_size: 12GB
        effective_io_concurrency: 200
        maintenance_work_mem: 819MB
        max_connections: 100
        max_parallel_workers: 2
        max_parallel_workers_per_gather: 2
        max_wal_size: 3GB
        max_worker_processes: 8
        min_wal_size: 2GB
        random_page_cost: 1.1
        shared_buffers: 4GB
        wal_buffers: -1
        work_mem: 82MB
  initdb:
  - encoding: UTF8
  - data-checksums
  pg_hba:
  - host replication replicator 0.0.0.0/0 md5
  - host all all 0.0.0.0/0 md5
  users:
    admin:
      password: qwerty
      options:
        - createrole
        - createdb
postgresql:
  listen: 0.0.0.0:5432
  connect_address: c-worker1-1:5432
  data_dir: /data/pg/
  bin_dir: /usr/lib/postgresql/16/bin/
  pgpass: /tmp/pgpass0
  authentication:
    replication:
      username: replicator
      password: qwerty
    superuser:
      username: postgres
      password: qwerty
    rewind:
      username: rewind_user
      password: qwerty
  parameters:
    unix_socket_directories: '.'
tags:
    nofailover: false
    noloadbalance: false
    clonefrom: false
    nosync: false
```


```
root@c-worker3-1:~# patronictl --config-file=/etc/patroni/config.yml list
+ Citus cluster: patroni -----------+----------------+-----------+----+-----------+
| Group | Member      | Host        | Role           | State     | TL | Lag in MB |
+-------+-------------+-------------+----------------+-----------+----+-----------+
|     0 | c-master1   | c-master1   | Leader         | running   |  1 |           |
|     0 | c-master2   | c-master2   | Quorum Standby | streaming |  1 |         0 |
|     0 | c-master3   | c-master3   | Quorum Standby | streaming |  1 |         0 |
|     1 | c-worker1-1 | c-worker1-1 | Leader         | running   |  1 |           |
|     1 | c-worker1-2 | c-worker1-2 | Quorum Standby | streaming |  1 |         0 |
|     2 | c-worker2-1 | c-worker2-1 | Leader         | running   |  1 |           |
|     2 | c-worker2-2 | c-worker2-2 | Quorum Standby | streaming |  1 |         0 |
|     3 | c-worker3-1 | c-worker3-1 | Leader         | running   |  1 |           |
|     3 | c-worker3-2 | c-worker3-2 | Quorum Standby | streaming |  1 |         0 |
+-------+-------------+-------------+----------------+-----------+----+-----------+
```


```
  116  apt-get install tuned
  117  > /usr/lib/tuned/postgresql/tuned.conf
  118  vim.tiny /usr/lib/tuned/postgresql/tuned.conf 
  119  tuned-adm active ; tuned-adm profile postgresql ;tuned-adm active

root@c-master1:~# cat /usr/lib/tuned/postgresql/tuned.conf
[main]
summary=Optimize for PostgreSQL RDBMS
include=throughput-performance
[sysctl]
vm.swappiness = 5
vm.dirty_background_ratio = 10
vm.dirty_ratio = 40
vm.dirty_expire_centisecs = 3000
vm.dirty_writeback_centisecs = 500
kernel.shmmax = 18446744073692700000
kernel.shmall = 18446744073692700000
kernel.shmmni = 4096
kernel.sem = 250 512000 100 2048
fs.file-max = 312139770
fs.aio-max-nr = 1048576
net.ipv4.ip_local_port_range = 2048 65499
# Permits sockets in the time-wait state to be reused for new connections:
net.ipv4.tcp_tw_reuse = 1
net.core.netdev_budget = 1024
net.core.netdev_max_backlog = 2048
net.core.rmem_default = 262144
net.core.rmem_max = 4194304
net.core.wmem_default = 262144
net.core.wmem_max = 1048576
kernel.panic_on_oops = 1
# We don't need NUMA balancing in this box:
kernel.numa_balancing = 0
# Used if not defined by the service:
net.core.somaxconn = 4096
# Other parameters to override throughput-performance template
net.ipv4.tcp_rmem = 4096 87380 16777216
net.ipv4.tcp_wmem = 4096 65536 16777216
net.ipv4.tcp_window_scaling = 1
net.netfilter.nf_conntrack_max = 250000
net.ipv4.tcp_max_syn_backlog=4096
[vm]
transparent_hugepages=never
```


```
root@c-master3:/data/csv# psql -h 127.0.0.1 -U postgres -d otus
psql (16.8 (Ubuntu 16.8-1.pgdg22.04+1))
SSL connection (protocol: TLSv1.3, cipher: TLS_AES_256_GCM_SHA384, compression: off)
Type "help" for help.

otus=# CREATE TABLE opensky
(
    callsign TEXT,
    number TEXT,
    icao24 TEXT,
    registration TEXT,
    typecode TEXT,
    origin TEXT,
    destination TEXT NULL,
    firstseen TIMESTAMP WITH TIME ZONE NOT NULL,
    lastseen TIMESTAMP WITH TIME ZONE NOT NULL,
    day TIMESTAMP WITH TIME ZONE NOT NULL,
    latitude_1 NUMERIC,
    longitude_1 NUMERIC,
    altitude_1 NUMERIC,
    latitude_2 NUMERIC,
    longitude_2 NUMERIC,
    altitude_2 NUMERIC
) PARTITION BY RANGE (firstseen);
CREATE TABLE
otus=# 
otus=# \dx
                                    List of installed extensions
      Name      | Version |   Schema   |                        Description                         
----------------+---------+------------+------------------------------------------------------------
 citus          | 13.0-1  | pg_catalog | Citus distributed database
 citus_columnar | 11.3-1  | pg_catalog | Citus Columnar extension
 plpgsql        | 1.0     | pg_catalog | PL/pgSQL procedural language
 postgis        | 3.5.2   | public     | PostGIS geometry and geography spatial types and functions
(4 rows)

otus=# 
otus=# SELECT create_distributed_table('opensky', 'callsign');
 create_distributed_table 
--------------------------
 
(1 row)

otus=# 
otus=# 
otus=# SELECT create_time_partitions(
  table_name         := 'opensky',
  partition_interval := '1 month',
  start_from         := '2018-12-01 00:00:00',
  end_at             := '2021-12-31 23:59:59'
);
 create_time_partitions 
------------------------
 t
(1 row)

otus=# 
otus=# \dt
                    List of relations
 Schema |       Name       |       Type        |  Owner   
--------+------------------+-------------------+----------
 public | opensky          | partitioned table | postgres
 public | opensky_p2018_12 | table             | postgres
 public | opensky_p2019_01 | table             | postgres
 public | opensky_p2019_02 | table             | postgres
 public | opensky_p2019_03 | table             | postgres
 public | opensky_p2019_04 | table             | postgres
 public | opensky_p2019_05 | table             | postgres
 public | opensky_p2019_06 | table             | postgres
 public | opensky_p2019_07 | table             | postgres
 public | opensky_p2019_08 | table             | postgres
 public | opensky_p2019_09 | table             | postgres
 public | opensky_p2019_10 | table             | postgres
 public | opensky_p2019_11 | table             | postgres
 public | opensky_p2019_12 | table             | postgres
 public | opensky_p2020_01 | table             | postgres
 public | opensky_p2020_02 | table             | postgres
 public | opensky_p2020_03 | table             | postgres
 public | opensky_p2020_04 | table             | postgres
 public | opensky_p2020_05 | table             | postgres
 public | opensky_p2020_06 | table             | postgres
 public | opensky_p2020_07 | table             | postgres
 public | opensky_p2020_08 | table             | postgres
 public | opensky_p2020_09 | table             | postgres
 public | opensky_p2020_10 | table             | postgres
 public | opensky_p2020_11 | table             | postgres
 public | opensky_p2020_12 | table             | postgres
 public | opensky_p2021_01 | table             | postgres
 public | opensky_p2021_02 | table             | postgres
 public | opensky_p2021_03 | table             | postgres
 public | opensky_p2021_04 | table             | postgres
 public | opensky_p2021_05 | table             | postgres
 public | opensky_p2021_06 | table             | postgres
 public | opensky_p2021_07 | table             | postgres
 public | opensky_p2021_08 | table             | postgres
 public | opensky_p2021_09 | table             | postgres
 public | opensky_p2021_10 | table             | postgres
 public | opensky_p2021_11 | table             | postgres
 public | opensky_p2021_12 | table             | postgres
 public | spatial_ref_sys  | table             | postgres
(39 rows)

otus=# 
otus=# 
otus=# \q
root@c-master3:/data/csv# 
root@c-master3:/data/csv# 
root@c-master3:/data/csv# 
root@c-master3:/data/csv# date; for ii in flightlist_2019* flightlist_2020* flightlist_2021* ; do echo ${ii} ; zcat ${ii} | psql -h 127.0.0.1 -U postgres -d otus -c "COPY opensky from stdin with delimiter ',' CSV HEADER" ; done ; date
Wed Feb 26 17:19:46 UTC 2025
flightlist_20190101_20190131.csv.gz
COPY 2145469
flightlist_20190201_20190228.csv.gz
COPY 2005958
flightlist_20190301_20190331.csv.gz
COPY 2283154
flightlist_20190401_20190430.csv.gz


COPY 2375102
flightlist_20190501_20190531.csv.gz
COPY 2539167
flightlist_20190601_20190630.csv.gz
COPY 2660901
flightlist_20190701_20190731.csv.gz
COPY 2898415
flightlist_20190801_20190831.csv.gz
COPY 2990061
flightlist_20190901_20190930.csv.gz
COPY 2721743
flightlist_20191001_20191031.csv.gz
COPY 2946779
flightlist_20191101_20191130.csv.gz
COPY 2721437
flightlist_20191201_20191231.csv.gz
COPY 2701295
flightlist_20200101_20200131.csv.gz
COPY 2734791
flightlist_20200201_20200229.csv.gz
COPY 2648835
flightlist_20200301_20200331.csv.gz
COPY 2152157
flightlist_20200401_20200430.csv.gz
COPY 842905
flightlist_20200501_20200531.csv.gz
COPY 1088267
flightlist_20200601_20200630.csv.gz
COPY 1444224
flightlist_20200701_20200731.csv.gz
COPY 1905528
flightlist_20200801_20200831.csv.gz
COPY 2042040
flightlist_20200901_20200930.csv.gz
COPY 1930868
flightlist_20201001_20201031.csv.gz
COPY 1985145
flightlist_20201101_20201130.csv.gz
COPY 1825015
flightlist_20201201_20201231.csv.gz
COPY 1894751
flightlist_20210101_20210131.csv.gz
COPY 1783384
flightlist_20210201_20210228.csv.gz
COPY 1617845
flightlist_20210301_20210331.csv.gz
COPY 2079436
flightlist_20210401_20210430.csv.gz
COPY 2227362
flightlist_20210501_20210530.csv.gz
COPY 2278298
flightlist_20210601_20210630.csv.gz
COPY 2540487
Wed Feb 26 17:35:54 UTC 2025

```

```
otus=# SELECT table_name, table_size FROM citus_tables;
    table_name    | table_size 
------------------+------------
 opensky          | 0 bytes
 opensky_p2018_12 | 1792 kB
 opensky_p2019_01 | 345 MB
 opensky_p2019_02 | 324 MB
 opensky_p2019_03 | 367 MB
 opensky_p2019_04 | 382 MB
 opensky_p2019_05 | 408 MB
 opensky_p2019_06 | 427 MB
 opensky_p2019_07 | 465 MB
 opensky_p2019_08 | 478 MB
 opensky_p2019_09 | 436 MB
 opensky_p2019_10 | 472 MB
 opensky_p2019_11 | 437 MB
 opensky_p2019_12 | 434 MB
 opensky_p2020_01 | 444 MB
 opensky_p2020_02 | 427 MB
 opensky_p2020_03 | 350 MB
 opensky_p2020_04 | 136 MB
 opensky_p2020_05 | 177 MB
 opensky_p2020_06 | 235 MB
 opensky_p2020_07 | 312 MB
 opensky_p2020_08 | 335 MB
 opensky_p2020_09 | 317 MB
 opensky_p2020_10 | 321 MB
 opensky_p2020_11 | 295 MB
 opensky_p2020_12 | 305 MB
 opensky_p2021_01 | 288 MB
 opensky_p2021_02 | 261 MB
 opensky_p2021_03 | 335 MB
 opensky_p2021_04 | 358 MB
 opensky_p2021_05 | 365 MB
 opensky_p2021_06 | 405 MB
 opensky_p2021_07 | 256 kB
 opensky_p2021_08 | 256 kB
 opensky_p2021_09 | 256 kB
 opensky_p2021_10 | 256 kB
 opensky_p2021_11 | 256 kB
 opensky_p2021_12 | 256 kB
(38 rows)

otus=# SELECT partition, access_method FROM time_partitions  WHERE parent_table = 'opensky'::regclass;
    partition     | access_method 
------------------+---------------
 opensky_p2018_12 | heap
 opensky_p2019_01 | heap
 opensky_p2019_02 | heap
 opensky_p2019_03 | heap
 opensky_p2019_04 | heap
 opensky_p2019_05 | heap
 opensky_p2019_06 | heap
 opensky_p2019_07 | heap
 opensky_p2019_08 | heap
 opensky_p2019_09 | heap
 opensky_p2019_10 | heap
 opensky_p2019_11 | heap
 opensky_p2019_12 | heap
 opensky_p2020_01 | heap
 opensky_p2020_02 | heap
 opensky_p2020_03 | heap
 opensky_p2020_04 | heap
 opensky_p2020_05 | heap
 opensky_p2020_06 | heap
 opensky_p2020_07 | heap
 opensky_p2020_08 | heap
 opensky_p2020_09 | heap
 opensky_p2020_10 | heap
 opensky_p2020_11 | heap
 opensky_p2020_12 | heap
 opensky_p2021_01 | heap
 opensky_p2021_02 | heap
 opensky_p2021_03 | heap
 opensky_p2021_04 | heap
 opensky_p2021_05 | heap
 opensky_p2021_06 | heap
 opensky_p2021_07 | heap
 opensky_p2021_08 | heap
 opensky_p2021_09 | heap
 opensky_p2021_10 | heap
 opensky_p2021_11 | heap
 opensky_p2021_12 | heap
(37 rows)

otus=# 
otus=#  CALL alter_old_partitions_set_access_method('opensky','2021-12-01 00:00:00', 'columnar' );
NOTICE:  converting opensky_p2018_12 with start time 2018-12-01 00:00:00+00 and end time 2019-01-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2018_12
NOTICE:  moving the data of public.opensky_p2018_12
NOTICE:  dropping the old public.opensky_p2018_12
NOTICE:  renaming the new table to public.opensky_p2018_12
NOTICE:  converting opensky_p2019_01 with start time 2019-01-01 00:00:00+00 and end time 2019-02-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2019_01
NOTICE:  moving the data of public.opensky_p2019_01
NOTICE:  dropping the old public.opensky_p2019_01
NOTICE:  renaming the new table to public.opensky_p2019_01
NOTICE:  converting opensky_p2019_02 with start time 2019-02-01 00:00:00+00 and end time 2019-03-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2019_02
NOTICE:  moving the data of public.opensky_p2019_02
NOTICE:  dropping the old public.opensky_p2019_02
NOTICE:  renaming the new table to public.opensky_p2019_02
NOTICE:  converting opensky_p2019_03 with start time 2019-03-01 00:00:00+00 and end time 2019-04-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2019_03
NOTICE:  moving the data of public.opensky_p2019_03
NOTICE:  dropping the old public.opensky_p2019_03
NOTICE:  renaming the new table to public.opensky_p2019_03
NOTICE:  converting opensky_p2019_04 with start time 2019-04-01 00:00:00+00 and end time 2019-05-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2019_04
NOTICE:  moving the data of public.opensky_p2019_04
NOTICE:  dropping the old public.opensky_p2019_04
NOTICE:  renaming the new table to public.opensky_p2019_04
NOTICE:  converting opensky_p2019_05 with start time 2019-05-01 00:00:00+00 and end time 2019-06-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2019_05
NOTICE:  moving the data of public.opensky_p2019_05
NOTICE:  dropping the old public.opensky_p2019_05
NOTICE:  renaming the new table to public.opensky_p2019_05
NOTICE:  converting opensky_p2019_06 with start time 2019-06-01 00:00:00+00 and end time 2019-07-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2019_06
NOTICE:  moving the data of public.opensky_p2019_06
NOTICE:  dropping the old public.opensky_p2019_06
NOTICE:  renaming the new table to public.opensky_p2019_06
NOTICE:  converting opensky_p2019_07 with start time 2019-07-01 00:00:00+00 and end time 2019-08-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2019_07
NOTICE:  moving the data of public.opensky_p2019_07
NOTICE:  dropping the old public.opensky_p2019_07
NOTICE:  renaming the new table to public.opensky_p2019_07
NOTICE:  converting opensky_p2019_08 with start time 2019-08-01 00:00:00+00 and end time 2019-09-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2019_08
NOTICE:  moving the data of public.opensky_p2019_08
NOTICE:  dropping the old public.opensky_p2019_08
NOTICE:  renaming the new table to public.opensky_p2019_08
NOTICE:  converting opensky_p2019_09 with start time 2019-09-01 00:00:00+00 and end time 2019-10-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2019_09
NOTICE:  moving the data of public.opensky_p2019_09
NOTICE:  dropping the old public.opensky_p2019_09
NOTICE:  renaming the new table to public.opensky_p2019_09
NOTICE:  converting opensky_p2019_10 with start time 2019-10-01 00:00:00+00 and end time 2019-11-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2019_10
NOTICE:  moving the data of public.opensky_p2019_10
NOTICE:  dropping the old public.opensky_p2019_10
NOTICE:  renaming the new table to public.opensky_p2019_10
NOTICE:  converting opensky_p2019_11 with start time 2019-11-01 00:00:00+00 and end time 2019-12-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2019_11
NOTICE:  moving the data of public.opensky_p2019_11
NOTICE:  dropping the old public.opensky_p2019_11
NOTICE:  renaming the new table to public.opensky_p2019_11
NOTICE:  converting opensky_p2019_12 with start time 2019-12-01 00:00:00+00 and end time 2020-01-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2019_12
NOTICE:  moving the data of public.opensky_p2019_12
NOTICE:  dropping the old public.opensky_p2019_12
NOTICE:  renaming the new table to public.opensky_p2019_12
NOTICE:  converting opensky_p2020_01 with start time 2020-01-01 00:00:00+00 and end time 2020-02-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2020_01
NOTICE:  moving the data of public.opensky_p2020_01
NOTICE:  dropping the old public.opensky_p2020_01
NOTICE:  renaming the new table to public.opensky_p2020_01
NOTICE:  converting opensky_p2020_02 with start time 2020-02-01 00:00:00+00 and end time 2020-03-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2020_02
NOTICE:  moving the data of public.opensky_p2020_02
NOTICE:  dropping the old public.opensky_p2020_02
NOTICE:  renaming the new table to public.opensky_p2020_02
NOTICE:  converting opensky_p2020_03 with start time 2020-03-01 00:00:00+00 and end time 2020-04-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2020_03
NOTICE:  moving the data of public.opensky_p2020_03
NOTICE:  dropping the old public.opensky_p2020_03
NOTICE:  renaming the new table to public.opensky_p2020_03
NOTICE:  converting opensky_p2020_04 with start time 2020-04-01 00:00:00+00 and end time 2020-05-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2020_04
NOTICE:  moving the data of public.opensky_p2020_04
NOTICE:  dropping the old public.opensky_p2020_04
NOTICE:  renaming the new table to public.opensky_p2020_04
NOTICE:  converting opensky_p2020_05 with start time 2020-05-01 00:00:00+00 and end time 2020-06-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2020_05
NOTICE:  moving the data of public.opensky_p2020_05
NOTICE:  dropping the old public.opensky_p2020_05
NOTICE:  renaming the new table to public.opensky_p2020_05
NOTICE:  converting opensky_p2020_06 with start time 2020-06-01 00:00:00+00 and end time 2020-07-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2020_06
NOTICE:  moving the data of public.opensky_p2020_06
NOTICE:  dropping the old public.opensky_p2020_06
NOTICE:  renaming the new table to public.opensky_p2020_06
NOTICE:  converting opensky_p2020_07 with start time 2020-07-01 00:00:00+00 and end time 2020-08-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2020_07
NOTICE:  moving the data of public.opensky_p2020_07
NOTICE:  dropping the old public.opensky_p2020_07
NOTICE:  renaming the new table to public.opensky_p2020_07
NOTICE:  converting opensky_p2020_08 with start time 2020-08-01 00:00:00+00 and end time 2020-09-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2020_08
NOTICE:  moving the data of public.opensky_p2020_08
NOTICE:  dropping the old public.opensky_p2020_08
NOTICE:  renaming the new table to public.opensky_p2020_08
NOTICE:  converting opensky_p2020_09 with start time 2020-09-01 00:00:00+00 and end time 2020-10-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2020_09
NOTICE:  moving the data of public.opensky_p2020_09
NOTICE:  dropping the old public.opensky_p2020_09
NOTICE:  renaming the new table to public.opensky_p2020_09
NOTICE:  converting opensky_p2020_10 with start time 2020-10-01 00:00:00+00 and end time 2020-11-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2020_10
NOTICE:  moving the data of public.opensky_p2020_10
NOTICE:  dropping the old public.opensky_p2020_10
NOTICE:  renaming the new table to public.opensky_p2020_10
NOTICE:  converting opensky_p2020_11 with start time 2020-11-01 00:00:00+00 and end time 2020-12-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2020_11
NOTICE:  moving the data of public.opensky_p2020_11
NOTICE:  dropping the old public.opensky_p2020_11
NOTICE:  renaming the new table to public.opensky_p2020_11
NOTICE:  converting opensky_p2020_12 with start time 2020-12-01 00:00:00+00 and end time 2021-01-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2020_12
NOTICE:  moving the data of public.opensky_p2020_12
NOTICE:  dropping the old public.opensky_p2020_12
NOTICE:  renaming the new table to public.opensky_p2020_12
NOTICE:  converting opensky_p2021_01 with start time 2021-01-01 00:00:00+00 and end time 2021-02-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2021_01
NOTICE:  moving the data of public.opensky_p2021_01
NOTICE:  dropping the old public.opensky_p2021_01
NOTICE:  renaming the new table to public.opensky_p2021_01
NOTICE:  converting opensky_p2021_02 with start time 2021-02-01 00:00:00+00 and end time 2021-03-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2021_02
NOTICE:  moving the data of public.opensky_p2021_02
NOTICE:  dropping the old public.opensky_p2021_02
NOTICE:  renaming the new table to public.opensky_p2021_02
NOTICE:  converting opensky_p2021_03 with start time 2021-03-01 00:00:00+00 and end time 2021-04-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2021_03
NOTICE:  moving the data of public.opensky_p2021_03
NOTICE:  dropping the old public.opensky_p2021_03
NOTICE:  renaming the new table to public.opensky_p2021_03
NOTICE:  converting opensky_p2021_04 with start time 2021-04-01 00:00:00+00 and end time 2021-05-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2021_04
NOTICE:  moving the data of public.opensky_p2021_04
NOTICE:  dropping the old public.opensky_p2021_04
NOTICE:  renaming the new table to public.opensky_p2021_04
NOTICE:  converting opensky_p2021_05 with start time 2021-05-01 00:00:00+00 and end time 2021-06-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2021_05
NOTICE:  moving the data of public.opensky_p2021_05
NOTICE:  dropping the old public.opensky_p2021_05
NOTICE:  renaming the new table to public.opensky_p2021_05
NOTICE:  converting opensky_p2021_06 with start time 2021-06-01 00:00:00+00 and end time 2021-07-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2021_06
NOTICE:  moving the data of public.opensky_p2021_06
NOTICE:  dropping the old public.opensky_p2021_06
NOTICE:  renaming the new table to public.opensky_p2021_06
NOTICE:  converting opensky_p2021_07 with start time 2021-07-01 00:00:00+00 and end time 2021-08-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2021_07
NOTICE:  moving the data of public.opensky_p2021_07
NOTICE:  dropping the old public.opensky_p2021_07
NOTICE:  renaming the new table to public.opensky_p2021_07
NOTICE:  converting opensky_p2021_08 with start time 2021-08-01 00:00:00+00 and end time 2021-09-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2021_08
NOTICE:  moving the data of public.opensky_p2021_08
NOTICE:  dropping the old public.opensky_p2021_08
NOTICE:  renaming the new table to public.opensky_p2021_08
NOTICE:  converting opensky_p2021_09 with start time 2021-09-01 00:00:00+00 and end time 2021-10-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2021_09
NOTICE:  moving the data of public.opensky_p2021_09
NOTICE:  dropping the old public.opensky_p2021_09
NOTICE:  renaming the new table to public.opensky_p2021_09
NOTICE:  converting opensky_p2021_10 with start time 2021-10-01 00:00:00+00 and end time 2021-11-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2021_10
NOTICE:  moving the data of public.opensky_p2021_10
NOTICE:  dropping the old public.opensky_p2021_10
NOTICE:  renaming the new table to public.opensky_p2021_10
NOTICE:  converting opensky_p2021_11 with start time 2021-11-01 00:00:00+00 and end time 2021-12-01 00:00:00+00
NOTICE:  creating a new table for public.opensky_p2021_11
NOTICE:  moving the data of public.opensky_p2021_11
NOTICE:  dropping the old public.opensky_p2021_11
NOTICE:  renaming the new table to public.opensky_p2021_11
CALL
otus=# 

otus=# SELECT partition, access_method FROM time_partitions  WHERE parent_table = 'opensky'::regclass;
    partition     | access_method 
------------------+---------------
 opensky_p2018_12 | columnar
 opensky_p2019_01 | columnar
 opensky_p2019_02 | columnar
 opensky_p2019_03 | columnar
 opensky_p2019_04 | columnar
 opensky_p2019_05 | columnar
 opensky_p2019_06 | columnar
 opensky_p2019_07 | columnar
 opensky_p2019_08 | columnar
 opensky_p2019_09 | columnar
 opensky_p2019_10 | columnar
 opensky_p2019_11 | columnar
 opensky_p2019_12 | columnar
 opensky_p2020_01 | columnar
 opensky_p2020_02 | columnar
 opensky_p2020_03 | columnar
 opensky_p2020_04 | columnar
 opensky_p2020_05 | columnar
 opensky_p2020_06 | columnar
 opensky_p2020_07 | columnar
 opensky_p2020_08 | columnar
 opensky_p2020_09 | columnar
 opensky_p2020_10 | columnar
 opensky_p2020_11 | columnar
 opensky_p2020_12 | columnar
 opensky_p2021_01 | columnar
 opensky_p2021_02 | columnar
 opensky_p2021_03 | columnar
 opensky_p2021_04 | columnar
 opensky_p2021_05 | columnar
 opensky_p2021_06 | columnar
 opensky_p2021_07 | columnar
 opensky_p2021_08 | columnar
 opensky_p2021_09 | columnar
 opensky_p2021_10 | columnar
 opensky_p2021_11 | columnar
 opensky_p2021_12 | heap
(37 rows)

```


